From 9b794ac1d48c68a0f48592ef6c73471c67f18fd4 Mon Sep 17 00:00:00 2001
From: Gerrit Pape <pape@smarden.org>
Date: Thu, 3 May 2007 09:13:51 +0000
Subject: [PATCH] Avoid -fno-pic on mips/mipsel, libgcc.a is compiled with -fPIC on Debian.

(thx Johannes Stezenbach).
---
 diet.c            |    2 +-
 mips/Makefile.add |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/diet.c b/diet.c
index 3677b4c..c233279 100644
--- a/diet.c
+++ b/diet.c
@@ -37,7 +37,7 @@ static const char* Os[] = {
 #else
   "arm","-Os","-fomit-frame-pointer",0,
 #endif 
-  "mips","-Os","-fomit-frame-pointer","-mno-abicalls","-fno-pic","-G","0",0,
+  "mips","-Os","-fomit-frame-pointer",0,
   "mipsel","-Os","-fomit-frame-pointer","-mno-abicalls","-fno-pic","-G","0",0,
   "ppc","-Os","-fomit-frame-pointer","-mpowerpc-gpopt","-mpowerpc-gfxopt",0,
   "ppc64","-Os","-fomit-frame-pointer","-mpowerpc-gpopt","-mpowerpc-gfxopt",0,
diff --git a/mips/Makefile.add b/mips/Makefile.add
index 35d9aa3..0b59d04 100644
--- a/mips/Makefile.add
+++ b/mips/Makefile.add
@@ -9,6 +9,6 @@
 ifeq ($(CROSS),mips-linux-)
 ENDIAN=-meb
 endif
-CFLAGS+=$(ENDIAN) -Os -G 0 -fstrict-aliasing -fno-pic -mno-abicalls
+CFLAGS+=$(ENDIAN) -Os -fstrict-aliasing
 VPATH:=mips:syscalls.s:$(VPATH)
 LIBOBJ+=$(OBJDIR)/pread64.o $(OBJDIR)/pwrite64.o $(OBJDIR)/divdi3.o
-- 
1.6.0.3

