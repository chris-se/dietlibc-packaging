From 007a0f853f05947a8bb9e3a4bd2a76ffb4295871 Mon Sep 17 00:00:00 2001
From: Gerrit Pape <pape@smarden.org>
Date: Thu, 3 May 2007 09:13:51 +0000
Subject: [PATCH 03/13] Avoid -fno-pic on mips/mipsel, libgcc.a is compiled with -fPIC on Debian.

(thx Johannes Stezenbach).
---
 diet.c            |    2 +-
 mips/Makefile.add |    2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

Index: dietlibc-0.33~cvs20110918/diet.c
===================================================================
--- dietlibc-0.33~cvs20110918.orig/diet.c	2011-11-03 21:49:36.000000000 +0100
+++ dietlibc-0.33~cvs20110918/diet.c	2011-11-03 21:51:44.000000000 +0100
@@ -33,7 +33,7 @@
   "sparc64","-Os","-m64","-mhard-quad-float",0,
   "alpha","-Os","-fomit-frame-pointer",0,
   "arm","-Os","-fomit-frame-pointer",0,
-  "mips","-Os","-fomit-frame-pointer","-mno-abicalls","-fno-pic","-G","0",0,
+  "mips","-Os","-fomit-frame-pointer",0,
   "mipsel","-Os","-fomit-frame-pointer","-mno-abicalls","-fno-pic","-G","0",0,
   "ppc","-Os","-fomit-frame-pointer","-mpowerpc-gpopt","-mpowerpc-gfxopt",0,
   "ppc64","-Os","-fomit-frame-pointer","-mpowerpc-gpopt","-mpowerpc-gfxopt",0,
Index: dietlibc-0.33~cvs20110918/mips/Makefile.add
===================================================================
--- dietlibc-0.33~cvs20110918.orig/mips/Makefile.add	2011-09-16 20:34:24.000000000 +0200
+++ dietlibc-0.33~cvs20110918/mips/Makefile.add	2011-11-03 21:51:44.000000000 +0100
@@ -9,6 +9,6 @@
 ifeq ($(CROSS),mips-linux-)
 ENDIAN=-meb
 endif
-CFLAGS+=$(ENDIAN) -Os -G 0 -fstrict-aliasing -fno-pic -mno-abicalls
+CFLAGS+=$(ENDIAN) -Os -fstrict-aliasing
 VPATH:=mips:syscalls.s:$(VPATH)
 LIBOBJ+=$(OBJDIR)/pread64.o $(OBJDIR)/pwrite64.o $(OBJDIR)/divdi3.o
